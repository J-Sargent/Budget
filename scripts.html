<script>
  function findErrors() {
    google.script.run
      .withSuccessHandler(function(response) {
        var i = 1;
        response.forEach(function(obj) {
          var newDiv = document.createElement("div");
          var divName = "div" + i;
          i++;
          newDiv.id = divName;
          newDiv.className = "error-div";
          var future = Object.entries(obj.futureError);
          newDiv.appendChild(document.createTextNode("Future: "));
          future.forEach(function(property) {
            var par = document.createElement("p");
            par.appendChild(
              document.createTextNode(property[0] + ": " + property[1])
            );
            newDiv.appendChild(par);
          });
          newDiv.appendChild(document.createElement("br"));
          newDiv.appendChild(document.createTextNode("Budget: "));
          var budget = Object.entries(obj.budgetError);
          budget.forEach(function(property) {
            var par = document.createElement("p");
            par.appendChild(
              document.createTextNode(property[0] + ": " + property[1])
            );
            newDiv.appendChild(par);
          });
          var changeButton = document.createElement("button");
          changeButton.innerHTML = "Change";
          changeButton.onclick = function() {
            makeUpdateA(obj);
          };
          var ignoreButton = document.createElement("button");
          ignoreButton.innerHTML = "Ignore";
          ignoreButton.onclick = function() {
            ignore(divName);
          };
          newDiv.appendChild(document.createElement("br"));
          newDiv.appendChild(changeButton);
          newDiv.appendChild(ignoreButton);
          var currentDiv = document.getElementById("div1");
          document.body.insertBefore(newDiv, currentDiv);
        });
      })
      .withFailureHandler(function(error) {
        console.log(error);
      })
      .findErrors();
  }

  function ignore(divName) {
    var thisDiv = document.getElementById(divName);
    thisDiv.parentNode.removeChild(thisDiv);
  }

  // google.script.run
  //   .withSuccessHandler(function(response) {
  //     console.log(response);
  //     response.forEach(function(futureRow) {
  //       var newDiv = document.createElement("div");
  //       var fart = document.createTextNode("fart");
  //       newDiv.appendChild(fart);
  //       var currentDiv = document.getElementById("div1");
  //       document.body.insertBefore(newDiv, currentDiv);
  //     });
  //   })
  //   .withFailureHandler(function(error) {
  //     console.log(error);
  //   })
  //   .arrayTest();

  function makeUpdateA(errorObj) {
    google.script.run
      .withSuccessHandler(function(response) {
        console.log(response);
      })
      .withFailureHandler(function(error) {
        console.log(error);
      })
      .makeUpdateB(errorObj);
  }

  function test() {
    google.script.run
      .withSuccessHandler(function(response) {
        manBox = document.getElementById("errorList");
        manBox.innerHTML = response;
      })
      .withFailureHandler(function(error) {
        console.log(error);
      })
      .textTest();
  }

  // google.script.run
  //   .withSuccessHandler(function(response) {
  //   })
  //   .withFailureHandler(function(error) {
  //     console.log(error);
  //   })
  //   .functionName();
</script>
